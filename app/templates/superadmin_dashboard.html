{% extends "base.html" %}
{% block title %}SÃ¼per Admin Paneli{% endblock %}

{% block content %}
<div class="container mt-4 mb-4">

    <div class="card shadow-sm mb-4 bg-light">
        <div class="card-body">
            <h6 class="fw-semibold mb-1">Merhaba, {{ user.name }}!</h6>
            <small class="text-muted">
                SÃ¼per YÃ¶netici Kontrol Paneli'ne hoÅŸ geldiniz. Buradan yeni apartmanlar ekleyebilir ve tÃ¼m kullanÄ±cÄ±larÄ±n rollerini yÃ¶netebilirsiniz.
            </small>
        </div>
    </div>

    <!-- Bilgi KartlarÄ± -->
    <div class="row mb-4">
        <div class="col-md-3 mb-3">
            <div class="card text-white bg-primary shadow-sm">
                <div class="card-body">
                    <h6 class="card-title">Toplam Apartman</h6>
                    <h4 class="fw-bold">{{ stats.total_apartments }}</h4>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card text-white bg-success shadow-sm">
                <div class="card-body">
                    <h6 class="card-title">Toplam KullanÄ±cÄ±</h6>
                    <h4 class="fw-bold">{{ stats.total_users }}</h4>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card text-white bg-warning shadow-sm">
                <div class="card-body">
                    <h6 class="card-title">YÃ¶netici SayÄ±sÄ±</h6>
                    <h4 class="fw-bold">{{ stats.total_admins }}</h4>
                </div>
            </div>
        </div>
        <div class="col-md-3 mb-3">
            <div class="card text-white bg-danger shadow-sm">
                <div class="card-body">
                    <h6 class="card-title">Sakin SayÄ±sÄ±</h6>
                    <h4 class="fw-bold">{{ stats.total_residents }}</h4>
                </div>
            </div>
        </div>
    </div>

    <!-- Son Eklenen Apartmanlar -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-secondary text-white">
            <strong>ğŸ¢ Son Eklenen Apartmanlar</strong>
        </div>
        <div class="card-body p-0">
            <table class="table mb-0 table-hover">
                <thead class="table-light">
                    <tr>
                        <th>#</th>
                        <th>Apartman AdÄ±</th>
                        <th>Adres</th>
                        <th>OluÅŸturulma</th>
                    </tr>
                </thead>
                <tbody>
                    {% for apt in recent_apartments %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ apt.name }}</td>
                        <td>{{ apt.address or '-' }}</td>
                        <td>{{ apt.created_at.strftime('%d.%m.%Y') }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" class="text-center text-muted">KayÄ±tlÄ± apartman bulunamadÄ±.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- YÃ¶netici Ä°statistikleri -->
    <div class="card shadow-sm mb-4">
        <div class="card-header bg-info text-white">
            <strong>ğŸ§  YÃ¶netici Ä°statistikleri</strong>
        </div>
        <div class="card-body p-0">
            <table class="table mb-0 table-hover">
                <thead class="table-light">
                    <tr>
                        <th>#</th>
                        <th>YÃ¶netici AdÄ±</th>
                        <th>YanÄ±tlanan Talepler</th>
                        <th>Eklenen Giderler</th>
                    </tr>
                </thead>
                <tbody>
                    {% for admin in admin_stats %}
                    <tr>
                        <td>{{ loop.index }}</td>
                        <td>{{ admin.name }}</td>
                        <td>{{ admin.request_count }}</td>
                        <td>{{ admin.expense_count }}</td>
                    </tr>
                    {% else %}
                    <tr>
                        <td colspan="4" class="text-center text-muted">YÃ¶netici verisi bulunamadÄ±.</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <!-- KÄ±sayollar -->
    <div class="row text-center mt-4">
        <div class="col-lg-4 col-md-6 mb-4">
            <a href="{{ url_for('superadmin.add_apartment') }}" class="quick-access-card">
                <i class="bi bi-building-fill-add display-4"></i>
                <h5 class="mt-3">Yeni Apartman Ekle</h5>
            </a>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <a href="{{ url_for('superadmin.user_management') }}" class="quick-access-card">
                <i class="bi bi-people-fill display-4"></i>
                <h5 class="mt-3">KullanÄ±cÄ±larÄ± YÃ¶net</h5>
            </a>
        </div>
        <div class="col-lg-4 col-md-6 mb-4">
            <a href="{{ url_for('superadmin.list_apartments') }}" class="quick-access-card">
                <i class="bi bi-buildings-fill display-4"></i>
                <h5 class="mt-3">ApartmanlarÄ± YÃ¶net</h5>
            </a>
        </div>
    </div>
</div>
{% endblock %}
